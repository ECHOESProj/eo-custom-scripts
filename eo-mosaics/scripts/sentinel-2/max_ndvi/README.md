# Max ndvi multitemporal 

<a href="#" id='togglescript'>Show</a> script or [download](script.js){:target="_blank"} it.
<div id='script_view' style="display:none">
{% highlight javascript %}
      {% include_relative script.js %}
{% endhighlight %}
</div>

## Evaluate and visualize

 - [Sentinel Playground](https://apps.sentinel-hub.com/sentinel-playground-temporal/?source=S2&lat=40.4&lng=-3.730000000000018&zoom=12&preset=CUSTOM&layers=B01,B02,B03&maxcc=20&gain=1.0&gamma=1.0&time=2015-01-01%7C2019-11-08&atmFilter=&showDates=false&evalscript=Ly9WRVJTSU9OPTMgKGF1dG8tY29udmVydGVkIGZyb20gMSkKCi8vQmFzaWMgaW5pdGlhbGl6YXRpb24gc2V0dXAgZnVuY3Rpb24KZnVuY3Rpb24gc2V0dXAoKSB7CiAgcmV0dXJuIHsKCS8vTGlzdCBvZiBhbGwgYmFuZHMsIHRoYXQgd2lsbCBiZSB1c2VkIGluIHRoZSBzY3JpcHQsIGVpdGhlciBmb3IgdmlzdWFsaXphdGlvbiBvciBmb3IgY2hvb3NpbmcgYmVzdCBwaXhlbAogICAgaW5wdXQ6IFt7CiAgICAgIGJhbmRzOiBbCiAgICAgICAgICJCMDQiLAogICAgICAgICAiQjA4IgogICAgICBdCiAgICB9XSwKCS8vVGhpcyBjYW4gYWx3YXlzIGJlIHRoZSBzYW1lIGlmIG9uZSBpcyBkb2luZyBSR0IgaW1hZ2VzCiAgICBvdXRwdXQ6IHsgYmFuZHM6IDMgfSwKICAgIG1vc2FpY2tpbmc6ICJPUkJJVCIKICB9Cn0KCi8qCkluIHRoaXMgZnVuY3Rpb24gd2UgbGltaXQgdGhlIHNjZW5lcywgd2hpY2ggYXJlIHVzZWQgZm9yIHByb2Nlc3NpbmcuIApUaGVzZSBhcmUgYmFzZWQgYWxzbyBvbiBpbnB1dCB2YXJpYWJsZXMsIGNvbWluZyBmcm9tIFBsYXlncm91bmQuIApFLmcuIGlmIG9uZSBzZXRzIGRhdGUgIjIwMTctMDMtMDEiICgiVE8gZGF0ZSIpIGFuZCBjbG91ZCBjb3ZlcmFnZSBmaWx0ZXIgMzAlLCAKYWxsIHNjZW5lcyBvbGRlciB0aGFuIDIwMTctMDMtMDEgd2l0aCBjbG91ZCBjb3ZlcmFnZSAzMCUgd2lsbCBiZSBjaGVja2VkIGFnYWluc3QKZnVydGhlciBjb25kaXRpb25zIGluIHRoaXMgZnVuY3Rpb24uClRoZSBtb3JlIHNjZW5lcyB0aGVyZSBhcmUsIGxvbmdlciBpdCB3aWxsIHRha2UgdG8gcHJvY2VzcyB0aGUgZGF0YS4KQWZ0ZXIgNjAgc2Vjb25kcyBvZiBwcm9jZXNzaW5nLCB0aGVyZSB3aWxsIGJlIGEgdGltZW91dC4KKi8KCmZ1bmN0aW9uIGZpbHRlclNjZW5lcyAoc2NlbmVzLCBpbnB1dE1ldGFkYXRhKSB7CiAgICByZXR1cm4gc2NlbmVzLmZpbHRlcihmdW5jdGlvbiAoc2NlbmUpIHsKLy9IZXJlIHdlIGxpbWl0IGRhdGEgYmV0d2VlbiAiKFRPIGRhdGUgLSAxIG1vbnRoKSB0byAoVE8gZGF0ZSkKCSAgcmV0dXJuIHNjZW5lLmRhdGUuZ2V0VGltZSgpPj0oaW5wdXRNZXRhZGF0YS50by5nZXRUaW1lKCktMSozMSoyNCozNjAwKjEwMDApIDsKICAgIH0pOwp9CgpmdW5jdGlvbiBjYWxjTkRWSShzYW1wbGUpIHsKICB2YXIgZGVub20gPSBzYW1wbGUuQjA0K3NhbXBsZS5CMDg7CiAgcmV0dXJuICgoZGVub20hPTApID8gKHNhbXBsZS5CMDgtc2FtcGxlLkIwNCkgLyBkZW5vbSA6IDAuMCk7Cn0KZnVuY3Rpb24gZXZhbHVhdGVQaXhlbChzYW1wbGVzKSB7ICAKICB2YXIgbWF4ID0gMDsKICBmb3IgKHZhciBpPTA7aTxzYW1wbGVzLmxlbmd0aDtpKyspIHsKICAgICAgdmFyIG5kdmkgPSBjYWxjTkRWSShzYW1wbGVzW2ldKTsKICAgIG1heCA9IG5kdmkgPiBtYXggPyBuZHZpOm1heDsKICB9CmlmIChtYXg8LTEuMSkgcmV0dXJuIFswLDAsMF07CmVsc2UgaWYgKG1heDwtMC4yKSByZXR1cm4gWzAuNzUsMC43NSwwLjc1XTsKZWxzZSBpZiAobWF4PC0wLjEpIHJldHVybiBbMC44NiwwLjg2LDAuODZdOwplbHNlIGlmIChtYXg8MCkgcmV0dXJuIFsxLDEsMC44OF07CmVsc2UgaWYgKG1heDwwLjAyNSkgcmV0dXJuIFsxLDAuOTgsMC44XTsKZWxzZSBpZiAobWF4PDAuMDUpIHJldHVybiBbMC45MywwLjkxLDAuNzFdOwplbHNlIGlmIChtYXg8MC4wNzUpIHJldHVybiBbMC44NywwLjg1LDAuNjFdOwplbHNlIGlmIChtYXg8MC4xKSByZXR1cm4gWzAuOCwwLjc4LDAuNTFdOwplbHNlIGlmIChtYXg8MC4xMjUpIHJldHVybiBbMC43NCwwLjcyLDAuNDJdOwplbHNlIGlmIChtYXg8MC4xNSkgcmV0dXJuIFswLjY5LDAuNzYsMC4zOF07CmVsc2UgaWYgKG1heDwwLjE3NSkgcmV0dXJuIFswLjY0LDAuOCwwLjM1XTsKZWxzZSBpZiAobWF4PDAuMikgcmV0dXJuIFswLjU3LDAuNzUsMC4zMl07CmVsc2UgaWYgKG1heDwwLjI1KSByZXR1cm4gWzAuNSwwLjcsMC4yOF07CmVsc2UgaWYgKG1heDwwLjMpIHJldHVybiBbMC40NCwwLjY0LDAuMjVdOwplbHNlIGlmIChtYXg8MC4zNSkgcmV0dXJuIFswLjM4LDAuNTksMC4yMV07CmVsc2UgaWYgKG1heDwwLjQpIHJldHVybiBbMC4zMSwwLjU0LDAuMThdOwplbHNlIGlmIChtYXg8MC40NSkgcmV0dXJuIFswLjI1LDAuNDksMC4xNF07CmVsc2UgaWYgKG1heDwwLjUpIHJldHVybiBbMC4xOSwwLjQzLDAuMTFdOwplbHNlIGlmIChtYXg8MC41NSkgcmV0dXJuIFswLjEzLDAuMzgsMC4wN107CmVsc2UgaWYgKG1heDwwLjYpIHJldHVybiBbMC4wNiwwLjMzLDAuMDRdOwplbHNlIHJldHVybiBbMCwwLjI3LDBdOwoKfQo%3D&temporal=true){:target="_blank"}

## General description

The script evaluates the NDVI for each scene of the past month and returns the highest NDVI value for every pixel. In short, it returns the highest NDVI values of the past month for every pixel. The script runs on-the-fly, since
it doesn't require preprocessing. It can be used as a cloud free background or an input for further analysis, such as change detection and classification. [Find out more.](https://www.sentinel-hub.com/max_service){:target="_blank"}  
Note that multi-temporal processing needs to be enabled for this script to run.

## Description of representative images

The max NDVI of Madrid, Spain. Acquired on 08.11.2019, processed by Sentinel Hub. 

![max NDVI of Madrid.](fig/fig1.png)



